(this.webpackJsonpt3=this.webpackJsonpt3||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(16),a=n.n(s),i=(n(51),n.p,n(52),n(18)),o=n.n(i),l=n(28),j=n(22),d=n(5),u=n(46),b=n(3),h=n(2),O=n.n(h),p=n(89),x=n(93),f=n(90),g=n(91),m=n(92),v=(n(54),n(45)),S=n.n(v),w=n.p+"static/media/start2.706faed1.png",A=n.p+"static/media/start.c6210857.png",y=n.p+"static/media/airplane.7e62ba1b.png",H=n(1);function k(){var e=[{color:"black"},{color:"red"},{color:"blue"},{color:"yellow"},{color:"green"},{color:"purple"},{color:"orange"},{color:"lime"}];return e[Math.floor(Math.random()*e.length)]}var C=O.a.icon({iconUrl:y,shadowUrl:null,iconAnchor:null,shadowSize:null,shadowAnchor:null,iconSize:[50,50]}),T=O.a.icon({iconUrl:A,shadowUrl:null,iconAnchor:null,shadowSize:null,shadowAnchor:null,iconSize:[20,20]}),z=O.a.icon({iconUrl:w,shadowUrl:null,iconAnchor:null,shadowSize:null,shadowAnchor:null,iconSize:[35,35]}),U=S()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),F=[{Header:"Code",accessor:"code"},{Header:"Airline",accessor:"airline"},{Header:"Plane",accessor:"plane"},{Header:"Seats",accessor:"seats"},{Header:"Passengers",accessor:"passengers"}];U.emit("FLIGHTS");var I=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(F),a=Object(b.a)(s,2),i=a[0],h=(a[1],Object(c.useState)("")),O=Object(b.a)(h,2),v=O[0],S=O[1],w=Object(c.useState)([]),A=Object(b.a)(w,2),y=A[0],I=A[1],L=Object(c.useState)({}),P=Object(b.a)(L,2),M=P[0],D=P[1],G=Object(c.useState)("anonymus"),B=Object(b.a)(G,2),E=B[0],J=B[1],N=Object(c.useState)(""),_=Object(b.a)(N,2);_[0],_[1];U.on("FLIGHTS",(function(e){for(var t=[],n=0;n<e.length;n++){for(var c=[],s=0;s<e[n].passengers.length;s++)c.push(e[n].passengers[s].name);var a={code:e[n].code,airline:e[n].airline,origin:e[n].origin,destination:e[n].destination,plane:e[n].plane,seats:e[n].seats,passengers:c.join(", "),color:k()};t.push(a)}r(t)})),Object(c.useEffect)((function(){U.on("CHAT",(function(e){I((function(t){return[].concat(Object(u.a)(t),[{name:e.name,message:e.message,date:new Date(e.date).toLocaleString()}])}))})),U.on("POSITION",(function(e){D((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(j.a)({},e.code,e.position))}))}))}),[]);var W=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),U.emit("CHAT",{name:E,message:v}),S("");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(H.jsxs)("div",{className:"App",children:[Object(H.jsx)("link",{rel:"stylesheet"}),Object(H.jsxs)("div",{children:[Object(H.jsx)("h2",{children:"MAP"}),Object(H.jsx)("div",{class:"map",children:Object(H.jsxs)(p.a,{center:[1.35,103.8],zoom:2,scrollWheelZoom:!1,children:[Object(H.jsx)(x.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((function(e){return Object(H.jsxs)("div",{children:[Object(H.jsx)(f.a,{position:e.origin,icon:T}),Object(H.jsx)(f.a,{position:e.destination,icon:z}),Object(H.jsx)(g.a,{pathOptions:e.color,positions:[e.origin,e.destination]})]})})),Object(H.jsx)("div",{children:Object.keys(M).map((function(e,t){return Object(H.jsx)("div",{children:Object(H.jsx)(f.a,{position:M[e],icon:C,children:Object(H.jsx)(m.a,{children:Object(H.jsx)("p",{children:e})})})})}))})]})}),Object(H.jsx)("br",{}),Object(H.jsx)("h2",{children:"CHAT"}),Object(H.jsx)("div",{class:"chat",children:y.map((function(e,t){return Object(H.jsxs)("div",{class:"container",children:[Object(H.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/12/User_icon_2.svg",alt:"Avatar"}),Object(H.jsx)("p",{children:e.name}),Object(H.jsx)("p",{children:e.message}),Object(H.jsx)("span",{class:"time-right",children:e.date})]})}))}),Object(H.jsx)("div",{children:Object(H.jsxs)("form",{onSubmit:W,children:[Object(H.jsx)("input",{type:"text",onChange:function(e){return S(e.target.value)}}),Object(H.jsx)("button",{children:"Send"})]})}),Object(H.jsx)("div",{children:Object(H.jsxs)("form",{onSubmit:Z,children:[Object(H.jsx)("input",{type:"text",onChange:function(e){return J(e.target.value)}}),Object(H.jsx)("button",{children:"Set Username"})]})}),Object(H.jsx)("div",{class:"clearfix"}),Object(H.jsx)("br",{}),Object(H.jsx)("h2",{children:"FLIGHTS"}),Object(H.jsx)("div",{class:"vuelos",children:Object(H.jsxs)("table",{id:"flights",children:[Object(H.jsx)("thead",{children:Object(H.jsx)("tr",{children:i.map((function(e,t){return Object(H.jsx)("th",{children:e.Header},t)}))})}),Object(H.jsx)("tbody",{children:n.map((function(e,t){return Object(H.jsxs)("tr",{children:[Object(H.jsx)("td",{children:e.code}),Object(H.jsx)("td",{children:e.airline}),Object(H.jsx)("td",{children:e.plane}),Object(H.jsx)("td",{children:e.seats}),Object(H.jsx)("td",{children:e.passengers})]},t)}))})]})})]})]})};var L=function(){return Object(H.jsx)(I,{})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(L,{})}),document.getElementById("root")),P()}},[[87,1,2]]]);
//# sourceMappingURL=main.8b6cf9dd.chunk.js.map